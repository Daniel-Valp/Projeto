"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([["710"],{9817:function(e,i,t){t.r(i),t.d(i,{SignUp:()=>D,SignUpSSOCallback:()=>E,SignUpContinue:()=>C,SignUpStart:()=>w,SignUpModal:()=>X,SignUpVerifyEmail:()=>q,SignUpVerifyPhone:()=>x});var r=t(9755),a=t(4914),l=t(9144),n=t(5112),o=t(7571),s=t(3064),d=t(4676),c=t(5332),u=t(9037),p=t(2539),m=t(3423),h=t(5295);let f=e=>{var i,t,a,l,n,o,d,u,p,f,g,v,b,_;let{handleSubmit:y,fields:A,formState:U,canToggleEmailPhone:S,onlyLegalAcceptedMissing:C=!1,handleEmailPhoneToggle:N}=e,{showOptionalFields:E}=(0,s.useAppearance)().parsedLayout,Z=e=>{var i;return("emailAddress"===e||"phoneNumber"===e)&&S?!!A[e]:!!A[e]&&(E||(null===(i=A[e])||void 0===i?void 0:i.required))};return(0,r.BX)(c.Form.Root,{onSubmit:y,gap:8,children:[!C&&(0,r.BX)(s.Col,{gap:6,children:[(Z("firstName")||Z("lastName"))&&(0,r.BX)(c.Form.ControlRow,{elementId:"name",sx:{[h.mqu.sm]:{flexWrap:"wrap"}},children:[Z("firstName")&&(0,r.tZ)(c.Form.PlainInput,{...U.firstName.props,isRequired:null===(i=A.firstName)||void 0===i?void 0:i.required,isOptional:!(null===(t=A.firstName)||void 0===t?void 0:t.required)}),Z("lastName")&&(0,r.tZ)(c.Form.PlainInput,{...U.lastName.props,isRequired:null===(a=A.lastName)||void 0===a?void 0:a.required,isOptional:!(null===(l=A.lastName)||void 0===l?void 0:l.required)})]}),Z("username")&&(0,r.tZ)(c.Form.ControlRow,{elementId:"username",children:(0,r.tZ)(c.Form.PlainInput,{...U.username.props,isRequired:null===(n=A.username)||void 0===n?void 0:n.required,isOptional:!(null===(o=A.username)||void 0===o?void 0:o.required)})}),Z("emailAddress")&&(0,r.tZ)(c.Form.ControlRow,{elementId:"emailAddress",children:(0,r.tZ)(c.Form.PlainInput,{...U.emailAddress.props,isRequired:null===(d=A.emailAddress)||void 0===d?void 0:d.required,isOptional:!(null===(u=A.emailAddress)||void 0===u?void 0:u.required),isDisabled:null===(p=A.emailAddress)||void 0===p?void 0:p.disabled,actionLabel:S?(0,s.localizationKeys)("signUp.start.actionLink__use_phone"):void 0,onActionClicked:S?()=>N("phoneNumber"):void 0})}),Z("phoneNumber")&&(0,r.tZ)(c.Form.ControlRow,{elementId:"phoneNumber",children:(0,r.tZ)(c.Form.PhoneInput,{...U.phoneNumber.props,isRequired:null===(f=A.phoneNumber)||void 0===f?void 0:f.required,isOptional:!(null===(g=A.phoneNumber)||void 0===g?void 0:g.required),actionLabel:S?(0,s.localizationKeys)("signUp.start.actionLink__use_email"):void 0,onActionClicked:S?()=>N("emailAddress"):void 0})}),Z("password")&&(0,r.tZ)(c.Form.ControlRow,{elementId:"password",children:(0,r.tZ)(c.Form.PasswordInput,{...U.password.props,isRequired:null===(v=A.password)||void 0===v?void 0:v.required,isOptional:!(null===(b=A.password)||void 0===b?void 0:b.required)})})]}),(0,r.BX)(s.Col,{center:!0,children:[(0,r.tZ)(m.S,{}),(0,r.BX)(s.Col,{gap:6,sx:{width:"100%"},children:[Z("legalAccepted")&&(0,r.tZ)(c.Form.ControlRow,{elementId:"legalAccepted",children:(0,r.tZ)(c.LegalCheckbox,{...U.legalAccepted.props,isRequired:null===(_=A.legalAccepted)||void 0===_?void 0:_.required})}),(0,r.tZ)(c.Form.SubmitButton,{hasArrow:!0,localizationKey:(0,s.localizationKeys)("formButtonPrimary")})]})]})]})};var g=t(5027);let v=["emailAddress","phoneNumber","username","firstName","lastName","password","ticket","legalAccepted"];function b(e){return v.reduce((i,t)=>{let r=function(e,i){switch(e){case"emailAddress":return function(e){let{attributes:i,hasTicket:t,hasEmail:r,activeCommIdentifierType:a,isProgressiveSignUp:l}=e;if(l){if(!((!t||t&&r)&&i.email_address.enabled)||y(i,l)&&"emailAddress"!==a)return;return{required:i.email_address.required,disabled:!!t&&!!r}}if((!t||t&&r)&&i.email_address.enabled&&i.email_address.used_for_first_factor&&"emailAddress"===a)return{required:!0,disabled:!!t&&!!r}}(i);case"phoneNumber":return function(e){let{attributes:i,hasTicket:t,activeCommIdentifierType:r,isProgressiveSignUp:a}=e;if(a){if(!i.phone_number.enabled||y(i,a)&&"phoneNumber"!==r)return;return{required:i.phone_number.required}}if(!t&&i.phone_number.enabled&&i.phone_number.used_for_first_factor&&"phoneNumber"===r)return{required:!0}}(i);case"password":return function(e){if(e.password.enabled&&e.password.required)return{required:e.password.required}}(i.attributes);case"ticket":return function(e){if(e)return{required:!0}}(i.hasTicket);case"legalAccepted":return function(e){if(e)return{required:!0}}(i.legalConsentRequired);case"username":case"firstName":case"lastName":return function(e,i){let t=(0,g.a1)(e);if(i[t].enabled)return{required:i[t].required}}(e,i.attributes);default:return}}(t,e);return r&&(i[t]=r),i},{})}let _=(e,i)=>{if(y(e,i))return"emailAddress";let{email_address:t,phone_number:r}=e;return(t.enabled&&i?t.required:t.used_for_first_factor)?"emailAddress":(r.enabled&&i?r.required:r.used_for_first_factor)?"phoneNumber":null};function y(e,i){let{email_address:t,phone_number:r}=e;return i?t.enabled&&r.enabled&&!t.required&&!r.required:t.used_for_first_factor&&r.used_for_first_factor}var A=t(138);let U=l.memo(e=>{let i=(0,a.cL)(),{navigate:t}=(0,d.useRouter)(),l=(0,c.useCardState)(),n=(0,o.useSignUpContext)(),s=(0,o.useCoreSignUp)(),u=n.ssoCallbackUrl,m=n.afterSignUpUrl||"/",{continueSignUp:h=!1,...f}=e;return(0,r.tZ)(A.L,{...f,oauthCallback:i=>s.authenticateWithRedirect({continueSignUp:h,redirectUrl:u,redirectUrlComplete:m,strategy:i,unsafeMetadata:n.unsafeMetadata,legalAccepted:e.legalAccepted}).catch(e=>(0,p.S3)(e,[],l.setError)),web3Callback:r=>i.authenticateWithWeb3({customNavigate:t,redirectUrl:m,signUpContinueUrl:"continue",unsafeMetadata:n.unsafeMetadata,strategy:r,legalAccepted:e.legalAccepted}).catch(e=>(0,p.Ht)(e,l.setError))})});var S=t(5756);let C=(0,c.withCardStateProvider)(function(){var e,i;let t=(0,u.v)(),n=(0,a.cL)(),{navigate:m}=(0,d.useRouter)(),{displayConfig:h,userSettings:g}=(0,o.useEnvironment)(),{attributes:v,usernameSettings:A}=g,{t:C,locale:N}=(0,s.useLocalizations)(),{afterSignUpUrl:E,signInUrl:Z,unsafeMetadata:I,initialValues:z={},isCombinedFlow:R}=(0,o.useSignUpContext)(),L=(0,o.useCoreSignUp)(),K=!!l.useContext(o.SignInContext),w=!!(R&&K),P=g.signUp.progressive,[k,F]=l.useState(_(v,g.signUp.progressive)),T={firstName:(0,p.Yp)("firstName",z.firstName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,p.Yp)("lastName",z.lastName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,p.Yp)("emailAddress",z.emailAddress||"",{type:"email",label:(0,s.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,p.Yp)("username",z.username||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__username"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__username"),transformer:e=>e.trim(),buildErrorMessage:e=>(0,p.fq)(e,{t:C,locale:N,usernameSettings:A})}),phoneNumber:(0,p.Yp)("phoneNumber",z.phoneNumber||"",{type:"tel",label:(0,s.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),password:(0,p.Yp)("password","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__password"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0}),legalAccepted:(0,p.Yp)("legalAccepted","",{type:"checkbox",label:"",defaultChecked:!1,isRequired:g.signUp.legal_consent_enabled||!1})},q=(0,l.useMemo)(()=>L.missingFields&&1===L.missingFields.length&&"legal_accepted"===L.missingFields[0],[L.missingFields]);if((0,l.useEffect)(()=>{L.id||m(h.signUpUrl)},[]),!L.id)return(0,r.tZ)(c.LoadingCard,{});let O=!!T.emailAddress.value,x=(null===(i=L.verifications)||void 0===i?void 0:null===(e=i.externalAccount)||void 0===e?void 0:e.status)=="verified",B=b({attributes:v,hasEmail:O,activeCommIdentifierType:k,signUp:L,isProgressiveSignUp:P,legalConsentRequired:g.signUp.legal_consent_enabled});!function(e,i){if(i){var t,r,a,l,n,o,s,d;let c=!!i.emailAddress,u=(null===(r=i.verifications)||void 0===r?void 0:null===(t=r.emailAddress)||void 0===t?void 0:t.status)==="verified",p=(null===(l=i.verifications)||void 0===l?void 0:null===(a=l.phoneNumber)||void 0===a?void 0:a.status)==="verified",m=(null===(o=i.verifications)||void 0===o?void 0:null===(n=o.externalAccount)||void 0===n?void 0:n.status)==="verified",h=(null===(d=i.verifications)||void 0===d?void 0:null===(s=d.web3Wallet)||void 0===s?void 0:s.status)==="verified",f=null!==i.legalAcceptedAt;c&&u&&delete e.emailAddress,p&&delete e.phoneNumber,(m||h)&&delete e.password,i.firstName&&delete e.firstName,i.lastName&&delete e.lastName,i.username&&delete e.username,f&&delete e.legalAccepted,Object.entries(e).forEach(i=>{let[t,r]=i;r&&!r.required&&delete e[t]})}}(B,L);let M=g.authenticatableSocialStrategies,D=async e=>{var i,r;e.preventDefault();let a=Object.entries(B).reduce((e,i)=>{let[t,r]=i;return[...e,...r&&T[t]?[T[t]]:[]]},[]);I&&a.push({id:"unsafeMetadata",value:I});let l=!!(null===(i=a.find(e=>"emailAddress"===e.id))||void 0===i?void 0:i.value),o=!!(null===(r=a.find(e=>"phoneNumber"===e.id))||void 0===r?void 0:r.value);return L.missingFields.includes("email_address")&&L.missingFields.includes("phone_number")&&!l&&!o&&y(v,P)&&(a.push(T.emailAddress),a.push(T.phoneNumber)),t.setLoading(),t.setError(void 0),L.update((0,p.ni)(a)).then(e=>(0,S.v)({signUp:e,verifyEmailPath:"./verify-email-address",verifyPhonePath:"./verify-phone-number",handleComplete:()=>n.setActive({session:e.createdSessionId,redirectUrl:E}),navigate:m})).catch(e=>(0,p.S3)(e,a,t.setError)).finally(()=>t.setIdle())},X=y(v,P),H=!x&&M.length>0,V=q?(0,s.localizationKeys)("signUp.legalConsent.continue.title"):(0,s.localizationKeys)("signUp.continue.title"),W=q?(0,s.localizationKeys)("signUp.legalConsent.continue.subtitle"):(0,s.localizationKeys)("signUp.continue.subtitle");return(0,r.tZ)(s.Flow.Part,{part:"complete",children:(0,r.BX)(c.Card.Root,{children:[(0,r.BX)(c.Card.Content,{children:[(0,r.BX)(c.Header.Root,{showLogo:!0,children:[(0,r.tZ)(c.Header.Title,{localizationKey:V}),(0,r.tZ)(c.Header.Subtitle,{localizationKey:W})]}),(0,r.tZ)(c.Card.Alert,{children:t.error}),(0,r.tZ)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:8,children:(0,r.BX)(c.SocialButtonsReversibleContainerWithDivider,{children:[H&&!q&&(0,r.tZ)(U,{enableOAuthProviders:H,enableWeb3Providers:!1,continueSignUp:!0}),(0,r.tZ)(f,{handleSubmit:D,fields:B,formState:T,onlyLegalAcceptedMissing:q,canToggleEmailPhone:X,handleEmailPhoneToggle:e=>{y(v,P)&&F(e)}})]})})]}),(0,r.tZ)(c.Card.Footer,{children:w?null:(0,r.BX)(c.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(c.Card.ActionText,{localizationKey:(0,s.localizationKeys)("signUp.continue.actionText")}),(0,r.tZ)(c.Card.ActionLink,{localizationKey:(0,s.localizationKeys)("signUp.continue.actionLink"),to:w?"../../":n.buildUrlWithAuth(Z)})]})})]})})});var N=t(8969);let E=(0,N.sN)(N.L);var Z=t(753),I=t(4029),z=t(2762),R=t(3234),L=t(8655);let K=()=>{let e=(0,a.cL)(),i=(0,u.v)(),{navigate:t}=(0,d.useRouter)(),{signInUrl:l,waitlistUrl:n}=(0,o.useSignUpContext)(),p=(0,R.H)(),{userSettings:m}=(0,o.useEnvironment)(),{mode:h}=m.signUp,f=async()=>{await t(e.buildUrlWithAuth(n))},g=h===Z.ci.RESTRICTED?(0,s.localizationKeys)("signUp.restrictedAccess.subtitle"):(0,s.localizationKeys)("signUp.restrictedAccess.subtitleWaitlist");return(0,r.BX)(c.Card.Root,{children:[(0,r.BX)(c.Card.Content,{children:[(0,r.BX)(c.Header.Root,{showLogo:!0,children:[(0,r.tZ)(s.Icon,{icon:L.gO,sx:e=>({margin:"auto",width:e.sizes.$10,height:e.sizes.$10})}),(0,r.tZ)(c.Header.Title,{localizationKey:(0,s.localizationKeys)("signUp.restrictedAccess.title")}),(0,r.tZ)(c.Header.Subtitle,{localizationKey:g})]}),(0,r.tZ)(c.Card.Alert,{children:i.error}),h===Z.ci.RESTRICTED&&p&&(0,r.tZ)(s.Flex,{direction:"col",gap:4,children:(0,r.tZ)(s.Button,{localizationKey:(0,s.localizationKeys)("signUp.restrictedAccess.blockButton__emailSupport"),onClick:()=>{window.location.href="mailto:".concat(p)}})}),h===Z.ci.WAITLIST&&(0,r.tZ)(s.Flex,{direction:"col",gap:4,children:(0,r.tZ)(s.Button,{localizationKey:(0,s.localizationKeys)("signUp.restrictedAccess.blockButton__joinWaitlist"),onClick:f})})]}),(0,r.tZ)(c.Card.Footer,{children:(0,r.BX)(c.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(c.Card.ActionText,{localizationKey:(0,s.localizationKeys)("signUp.restrictedAccess.actionText")}),(0,r.tZ)(c.Card.ActionLink,{localizationKey:(0,s.localizationKeys)("signUp.restrictedAccess.actionLink"),to:e.buildUrlWithAuth(l)})]})})]})},w=(0,N.sN)((0,c.withCardStateProvider)(function(){var e;let i=(0,u.v)(),t=(0,a.cL)(),n=(0,z._m)(),h=(0,o.useCoreSignUp)(),{showOptionalFields:g}=(0,s.useAppearance)().parsedLayout,{userSettings:v}=(0,o.useEnvironment)(),{navigate:A}=(0,d.useRouter)(),{attributes:C}=v,{setActive:N}=(0,a.cL)(),E=(0,o.useSignUpContext)(),R=!!l.useContext(o.SignInContext),{afterSignUpUrl:L,signInUrl:w,unsafeMetadata:P}=E,k=!!(E.isCombinedFlow&&R),[F,T]=l.useState(_(C,v.signUp.progressive)),{t:q,locale:O}=(0,s.useLocalizations)(),x=E.initialValues||{},[B,M]=l.useState(!1),{userSettings:{passwordSettings:D,usernameSettings:X}}=(0,o.useEnvironment)(),{mode:H}=v.signUp,V={firstName:(0,p.Yp)("firstName",h.firstName||x.firstName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__firstName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__firstName")}),lastName:(0,p.Yp)("lastName",h.lastName||x.lastName||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__lastName"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__lastName")}),emailAddress:(0,p.Yp)("emailAddress",h.emailAddress||x.emailAddress||"",{type:"email",label:(0,s.localizationKeys)("formFieldLabel__emailAddress"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__emailAddress")}),username:(0,p.Yp)("username",h.username||x.username||"",{type:"text",label:(0,s.localizationKeys)("formFieldLabel__username"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__username"),transformer:e=>e.trim(),buildErrorMessage:e=>(0,p.fq)(e,{t:q,locale:O,usernameSettings:X})}),phoneNumber:(0,p.Yp)("phoneNumber",h.phoneNumber||x.phoneNumber||"",{type:"tel",label:(0,s.localizationKeys)("formFieldLabel__phoneNumber"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__phoneNumber")}),legalAccepted:(0,p.Yp)("legalAccepted","",{type:"checkbox",label:"",defaultChecked:!1,isRequired:v.signUp.legal_consent_enabled||!1}),password:(0,p.Yp)("password","",{type:"password",label:(0,s.localizationKeys)("formFieldLabel__password"),placeholder:(0,s.localizationKeys)("formFieldInputPlaceholder__password"),validatePassword:!0,buildErrorMessage:e=>(0,p.GM)(e,{t:q,locale:O,passwordSettings:D})}),ticket:(0,p.Yp)("ticket",(0,I.X)("__clerk_ticket")||(0,I.X)("__clerk_invitation_token")||"")},W=!!V.ticket.value,Y=!!V.emailAddress.value,j=v.signUp.progressive,G=v.signUp.legal_consent_enabled,$=b({attributes:C,hasTicket:W,hasEmail:Y,activeCommIdentifierType:F,isProgressiveSignUp:j,legalConsentRequired:G}),Q=()=>{V.ticket.value&&(n.setLoading(),i.setLoading(),h.create({strategy:"ticket",ticket:V.ticket.value}).then(e=>(V.emailAddress.setValue(e.emailAddress||""),"missing_requirements"===e.status&&M(!0),(0,S.v)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>((0,I.x)("__clerk_ticket"),(0,I.x)("__clerk_invitation_token"),N({session:e.createdSessionId,redirectUrl:L})),navigate:A}))).catch(e=>{V.ticket.setValue(""),(0,p.S3)(e,[],i.setError)}).finally(()=>{n.setIdle(),i.setIdle()}))};l.useLayoutEffect(()=>{Q()},[]),l.useEffect(()=>{(async function(){let e=h.verifications.externalAccount.error;if(e){switch(e.code){case Z.O1.NOT_ALLOWED_TO_SIGN_UP:case Z.O1.OAUTH_ACCESS_DENIED:case Z.O1.NOT_ALLOWED_ACCESS:case Z.O1.SAML_USER_ATTRIBUTE_MISSING:case Z.O1.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:case Z.O1.USER_LOCKED:case Z.O1.ENTERPRISE_SSO_USER_ATTRIBUTE_MISSING:case Z.O1.ENTERPRISE_SSO_EMAIL_ADDRESS_DOMAIN_MISMATCH:case Z.O1.ENTERPRISE_SSO_HOSTED_DOMAIN_MISMATCH:case Z.O1.SAML_EMAIL_ADDRESS_DOMAIN_MISMATCH:case Z.O1.ORGANIZATION_MEMBERSHIP_QUOTA_EXCEEDED_FOR_SSO:case Z.O1.CAPTCHA_INVALID:i.setError(e);break;default:i.setError("Unable to complete action at this time. If the problem persists please contact support.")}await h.create({})}})()},[]);let J=async e=>{var t,r;e.preventDefault();let a=Object.entries($).reduce((e,i)=>{let[t,r]=i;return e.push(...r&&V[t]?[V[t]]:[]),e},[]);if(P&&a.push({id:"unsafeMetadata",value:P}),$.ticket){let e=()=>{};a.push({id:"strategy",value:"ticket",clearFeedback:e,setValue:e,onChange:e,setError:e})}let l=!!(null===(t=a.find(e=>"emailAddress"===e.id))||void 0===t?void 0:t.value),n=!!(null===(r=a.find(e=>"phoneNumber"===e.id))||void 0===r?void 0:r.value);!l&&!n&&y(C,j)&&(a.push(V.emailAddress),a.push(V.phoneNumber)),i.setLoading(),i.setError(void 0);let o=E.ssoCallbackUrl,s=E.afterSignUpUrl||"/";return h.upsert((0,p.ni)(a)).then(e=>(0,S.v)({signUp:e,verifyEmailPath:"verify-email-address",verifyPhonePath:"verify-phone-number",handleComplete:()=>N({session:e.createdSessionId,redirectUrl:L}),navigate:A,redirectUrl:o,redirectUrlComplete:s})).catch(e=>(0,p.S3)(e,a,i.setError)).finally(()=>i.setIdle())};if(n.isLoading)return(0,r.tZ)(c.LoadingCard,{});let ee=y(C,j),ei=Object.entries($).filter(e=>{let[i,t]=e;return g||(null==t?void 0:t.required)}),et=function(e){let{authenticatableSocialStrategies:i,web3FirstFactors:t}=e;return e.hasValidAuthFactor||!i.length&&!t.length}(v)&&ei.length>0,er=(!W||B)&&v.authenticatableSocialStrategies.length>0,ea=!W&&v.web3FirstFactors.length>0;return H===Z.ci.PUBLIC||W?(0,r.tZ)(s.Flow.Part,{part:"start",children:(0,r.BX)(c.Card.Root,{children:[(0,r.BX)(c.Card.Content,{children:[(0,r.BX)(c.Header.Root,{showLogo:!0,children:[(0,r.tZ)(c.Header.Title,{localizationKey:k?(0,s.localizationKeys)("signUp.start.titleCombined"):(0,s.localizationKeys)("signUp.start.title")}),(0,r.tZ)(c.Header.Subtitle,{localizationKey:k?(0,s.localizationKeys)("signUp.start.subtitleCombined"):(0,s.localizationKeys)("signUp.start.subtitle")})]}),(0,r.tZ)(c.Card.Alert,{children:i.error}),(0,r.BX)(s.Flex,{direction:"col",elementDescriptor:s.descriptors.main,gap:6,children:[(0,r.BX)(c.SocialButtonsReversibleContainerWithDivider,{children:[(er||ea)&&(0,r.tZ)(U,{enableOAuthProviders:er,enableWeb3Providers:ea,continueSignUp:B,legalAccepted:!!V.legalAccepted.checked||void 0}),et&&(0,r.tZ)(f,{handleSubmit:J,fields:$,formState:V,canToggleEmailPhone:ee,handleEmailPhoneToggle:e=>{y(C,j)&&T(e)}})]}),!et&&G&&(0,r.tZ)(c.Form.ControlRow,{elementId:"legalAccepted",children:(0,r.tZ)(c.LegalCheckbox,{...V.legalAccepted.props,isRequired:null===(e=$.legalAccepted)||void 0===e?void 0:e.required})}),!et&&(0,r.tZ)(m.S,{})]})]}),(0,r.tZ)(c.Card.Footer,{children:(0,r.BX)(c.Card.Action,{elementId:"signUp",children:[(0,r.tZ)(c.Card.ActionText,{localizationKey:(0,s.localizationKeys)("signUp.start.actionText")}),(0,r.tZ)(c.Card.ActionLink,{localizationKey:(0,s.localizationKeys)("signUp.start.actionLink"),to:k?"../":t.buildUrlWithAuth(w)})]})})]})}):(0,r.tZ)(K,{})})),P=e=>{let{afterSignUpUrl:i}=(0,o.useSignUpContext)(),{setActive:t}=(0,a.cL)(),{navigate:l}=(0,d.useRouter)();return(0,r.tZ)(c.VerificationCodeCard,{cardTitle:e.cardTitle,cardSubtitle:e.cardSubtitle,resendButton:e.resendButton,onCodeEntryFinishedAction:(r,a,n)=>{e.attempt(r).then(async e=>(await a(),(0,S.v)({signUp:e,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",continuePath:"../continue",handleComplete:()=>t({session:e.createdSessionId,redirectUrl:i}),navigate:l}))).catch(e=>n(e))},onResendCodeClicked:e.prepare,safeIdentifier:e.safeIdentifier,onIdentityPreviewEditClicked:()=>l("../")})},k=()=>{let e=(0,o.useCoreSignUp)(),i=(0,c.useCardState)(),t=e.verifications.emailAddress.status,a=!e.status||"verified"===t;return(0,z.ib)(a?void 0:()=>e.prepareEmailAddressVerification({strategy:"email_code"}).catch(e=>(0,p.S3)(e,[],i.setError)),{name:"prepare",strategy:"email_code",number:e.emailAddress},{staleTime:100}),(0,r.tZ)(s.Flow.Part,{part:"emailCode",children:(0,r.tZ)(P,{cardTitle:(0,s.localizationKeys)("signUp.emailCode.title"),cardSubtitle:(0,s.localizationKeys)("signUp.emailCode.subtitle"),inputLabel:(0,s.localizationKeys)("signUp.emailCode.formSubtitle"),resendButton:(0,s.localizationKeys)("signUp.emailCode.resendButton"),prepare:()=>{if(!a)return e.prepareEmailAddressVerification({strategy:"email_code"}).catch(e=>(0,p.S3)(e,[],i.setError))},attempt:i=>e.attemptEmailAddressVerification({code:i}),safeIdentifier:e.emailAddress})})};var F=t(4814);let T=()=>{let{t:e}=(0,s.useLocalizations)(),i=(0,o.useCoreSignUp)(),t=(0,o.useSignUpContext)(),{afterSignUpUrl:n}=t,m=(0,u.v)(),{navigate:h}=(0,d.useRouter)(),{setActive:f}=(0,a.cL)(),[g,v]=l.useState(!1),{startEmailLinkFlow:b,cancelEmailLinkFlow:_}=(0,F.E)(i);l.useEffect(()=>{y()},[]);let y=()=>b({redirectUrl:t.emailLinkRedirectUrl}).then(e=>A(e)).catch(e=>{(0,p.S3)(e,[],m.setError)}),A=async i=>{let t=i.verifications.emailAddress;"expired"===t.status?m.setError(e((0,s.localizationKeys)("formFieldError__verificationLinkExpired"))):t.verifiedFromTheSameClient()?v(!0):await (0,S.v)({signUp:i,continuePath:"../continue",verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number",handleComplete:()=>f({session:i.createdSessionId,redirectUrl:n}),navigate:h})};return g?(0,r.tZ)(N.Ej,{title:(0,s.localizationKeys)("signUp.emailLink.verifiedSwitchTab.title"),subtitle:(0,s.localizationKeys)("signUp.emailLink.verifiedSwitchTab.subtitleNewTab"),status:"verified_switch_tab"}):(0,r.tZ)(s.Flow.Part,{part:"emailLink",children:(0,r.tZ)(c.VerificationLinkCard,{cardTitle:(0,s.localizationKeys)("signUp.emailLink.title"),cardSubtitle:(0,s.localizationKeys)("signUp.emailLink.subtitle"),formTitle:(0,s.localizationKeys)("signUp.emailLink.formTitle"),formSubtitle:(0,s.localizationKeys)("signUp.emailLink.formSubtitle"),resendButton:(0,s.localizationKeys)("signUp.emailLink.resendButton"),onResendCodeClicked:()=>{_(),y()},safeIdentifier:i.emailAddress})})},q=(0,c.withCardStateProvider)(()=>{let{userSettings:e}=(0,o.useEnvironment)(),{attributes:i}=e;return i.email_address.verifications.includes("email_link")?(0,r.tZ)(T,{}):(0,r.tZ)(k,{})}),O=(0,c.withCardStateProvider)(()=>{let e=(0,o.useCoreSignUp)(),i=(0,c.useCardState)(),t=e.verifications.phoneNumber.status,a=!e.status||"verified"===t;return(0,z.ib)(a?void 0:()=>e.preparePhoneNumberVerification({strategy:"phone_code"}).catch(e=>(0,p.S3)(e,[],i.setError)),{name:"signUp.preparePhoneNumberVerification",strategy:"phone_code",number:e.phoneNumber},{staleTime:100}),(0,r.tZ)(s.Flow.Part,{part:"phoneCode",children:(0,r.tZ)(P,{cardTitle:(0,s.localizationKeys)("signUp.phoneCode.title"),cardSubtitle:(0,s.localizationKeys)("signUp.phoneCode.subtitle"),resendButton:(0,s.localizationKeys)("signUp.phoneCode.resendButton"),prepare:()=>{if(!a)return e.preparePhoneNumberVerification({strategy:"phone_code"}).catch(e=>(0,p.S3)(e,[],i.setError))},attempt:i=>e.attemptPhoneNumberVerification({code:i}),safeIdentifier:e.phoneNumber})})}),x=()=>(0,r.tZ)(O,{});function B(){let e=(0,a.cL)();return l.useEffect(()=>{e.redirectToSignUp()},[]),null}function M(){let e=(0,o.useSignUpContext)();return(0,r.tZ)(s.Flow.Root,{flow:"signUp",children:(0,r.BX)(d.Switch,{children:[(0,r.tZ)(d.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.tZ)(q,{})}),(0,r.tZ)(d.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.tZ)(x,{})}),(0,r.tZ)(d.Route,{path:"sso-callback",children:(0,r.tZ)(E,{signUpUrl:e.signUpUrl,signInUrl:e.signInUrl,signUpForceRedirectUrl:e.afterSignUpUrl,signInForceRedirectUrl:e.afterSignInUrl,secondFactorUrl:e.secondFactorUrl,continueSignUpUrl:"../continue",verifyEmailAddressUrl:"../verify-email-address",verifyPhoneNumberUrl:"../verify-phone-number"})}),(0,r.tZ)(d.Route,{path:"verify",children:(0,r.tZ)(n.$,{redirectUrlComplete:e.afterSignUpUrl,verifyEmailPath:"../verify-email-address",verifyPhonePath:"../verify-phone-number"})}),(0,r.BX)(d.Route,{path:"continue",children:[(0,r.tZ)(d.Route,{path:"verify-email-address",canActivate:e=>!!e.client.signUp.emailAddress,children:(0,r.tZ)(q,{})}),(0,r.tZ)(d.Route,{path:"verify-phone-number",canActivate:e=>!!e.client.signUp.phoneNumber,children:(0,r.tZ)(x,{})}),(0,r.tZ)(d.Route,{index:!0,children:(0,r.tZ)(C,{})})]}),(0,r.tZ)(d.Route,{index:!0,children:(0,r.tZ)(w,{})}),(0,r.tZ)(d.Route,{children:(0,r.tZ)(B,{})})]})})}M.displayName="SignUp";let D=(0,o.withCoreSessionSwitchGuard)(M),X=e=>{let i={signInUrl:"/".concat(d.VIRTUAL_ROUTER_BASE_PATH,"/sign-in"),waitlistUrl:"/".concat(d.VIRTUAL_ROUTER_BASE_PATH,"/waitlist"),...e};return(0,r.tZ)(d.Route,{path:"sign-up",children:(0,r.tZ)(o.SignUpContext.Provider,{value:{componentName:"SignUp",...i,routing:"virtual",mode:"modal"},children:(0,r.tZ)("div",{children:(0,r.tZ)(D,{...i,routing:"virtual"})})})})}},6052:function(e,i,t){t.r(i),t.d(i,{completeSignUpFlow:()=>r.v});var r=t(5756)}}]);